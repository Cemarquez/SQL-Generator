package generator.model;

import java.io.File;

import javax.swing.JFileChooser;

import sql_abstracts.ModelFactory;
import sql_abstracts.Schema;

public class TransformationM2T_SQL {
	
	private ModelFactory modelFactory;
	private JFileChooser chooser = new JFileChooser();
	
	public TransformationM2T_SQL(ModelFactory modelFactory) {
		this.modelFactory = modelFactory;
	}

	public String transformarM2T() {
		
		String mensaje = "Se ha realziado la transformación M2T SQL";
		
		
	   
	    
		for(Schema s : modelFactory.getLstSchema()) {
			chooser.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
			String nombreProyecto = s.getName();
			int returnVal = chooser.showOpenDialog(null);
		    if(returnVal == JFileChooser.APPROVE_OPTION) {
		    	File f =  chooser.getSelectedFile();
		    	f = new File(f.getPath()+"/"+nombreProyecto);
		    	System.out.println("Creacion de paquetes:");
		    	crearCarpetas(f.getPath());
		    	
		    	System.out.println();
		    	System.out.println("Creacion de clases:");
				for (abstracts.MClass cl : modelFactoryAbstracta.getLstAllClass()) {
					 System.out.println(crearClase(f.getPath(), cl));
				}
		    	
		    }else {
		    	
		    	mensaje = "Debe seleccionar una ubicación para continuar!";
		    }
		}
		
		
		return mensaje;
	}
	
	

}
